<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>1 Lion Esports — Registration</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root {--gold: #ffd24d;--gold-deep:#e6b800;}
    * {box-sizing: border-box;}
    body {
      margin: 0; font-family: 'Orbitron', sans-serif;
      background: radial-gradient(circle at 10% 10%, rgba(255,215,0,0.03), transparent 10%),
                  radial-gradient(circle at 90% 80%, rgba(255,215,0,0.02), transparent 10%),
                  linear-gradient(180deg,#030409 0%,#07070a 100%);
      color: #fff; min-height: 100vh; display: flex;
      flex-direction: column; align-items: center; padding: 20px;
    }
    header {text-align:center; margin-top:20px;}
    header img {
      width:108px; border-radius:18px;
      filter: drop-shadow(0 0 18px rgba(255,200,60,0.12));
    }
    h1 {
      margin: 12px 0 6px; color: var(--gold);
      text-shadow: 0 0 14px rgba(255,200,50,0.08);
      font-size:24px;
    }
    .lead { color: rgba(255,255,255,0.6); font-size:14px; }
    .card {
      background: linear-gradient(180deg, rgba(10,10,10,0.9), rgba(6,6,6,0.9));
      border-radius:14px; padding:18px; max-width:400px;
      margin-top:28px; width:100%;
      border:1px solid rgba(255,215,0,0.06);
      box-shadow: 0 10px 40px rgba(0,0,0,0.6);
    }
    input {
      width:100%; padding:12px; margin:10px 0; border-radius:8px;
      background: rgba(0,0,0,0.15); border:1px solid rgba(255,215,0,0.1);
      color:#fff; text-align:center; font-size:15px;
    }
    input:focus {
      outline: none; box-shadow: 0 0 12px rgba(255,200,50,0.08); border-color: rgba(255,215,0,0.2);
    }
    .btn {
      width:100%; padding:12px; border:none; border-radius:8px;
      background:linear-gradient(90deg,var(--gold), var(--gold-deep));
      color: #071218; font-weight:700; font-size:16px; cursor:pointer;
      box-shadow: 0 8px 30px rgba(255,200,60,0.12);
      margin-top:10px;
    }
    .status {
      display:none; margin-top:12px; color:#bdf1a9; font-size:15px;
    }
    .wa-link {
      display:none; margin-top:14px; font-size:14px;
      background:#25D366; color:#012; padding:10px 12px;
      border-radius:8px; text-decoration:none; font-weight:600;
    }
  </style>
</head>
<body>

  <header>
    <img src="https://i.postimg.cc/23d0f0rK/logo.png" alt="1 Lion Logo">
    <h1>1 LION ESPORTS — Registration</h1>
    <div class="lead">Pay ₹30 (UPI: 6370027283@fam). After payment, send screenshot on WhatsApp to confirm your slot.</div>
  </header>

  <div class="card">
    <input id="name" type="text" placeholder="Player Name" />
    <input id="gameID" type="text" placeholder="Free Fire UID" />
    <input id="phone" type="tel" placeholder="Phone (WhatsApp)" />
    <button id="submitBtn" class="btn">Pay ₹30 & Register</button>
    <div id="status" class="status"></div>
    <a id="waLink" class="wa-link" target="_blank">Message Admin on WhatsApp</a>
  </div>

<script>
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbykOAG-mwv8aQp1ZSvgvuqowm1a1Qwr4OhVdUP7a_QuZY-y8r-ddyuJr1LBZ0VyWznIYg/exec";
  const UPI_ID = "6370027283@fam";
  const AMOUNT = "30";
  const ADMIN_WA = "916370027283";

  const btn = document.getElementById('submitBtn');
  const status = document.getElementById('status');
  const waLink = document.getElementById('waLink');

  btn.addEventListener('click', async () => {
    const name = document.getElementById('name').value.trim();
    const gameID = document.getElementById('gameID').value.trim();
    const phone = document.getElementById('phone').value.trim();
    if (!name || !gameID || !phone) { alert('Please fill all fields'); return; }

    status.style.display = 'block';
    status.textContent = 'Saving registration...';

    try {
      const res = await fetch(WEB_APP_URL, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ name, gameID, phone, paymentStatus: "Pending" })
      });
      if (!res.ok) throw new Error('Sheet error');

      status.textContent = 'Saved. Opening UPI...';
      waLink.style.display = 'inline-block';
      waLink.href = `https://wa.me/${ADMIN_WA}?text=${encodeURIComponent("Paid ₹"+AMOUNT+" for tournament. Name: "+name+" UID: "+gameID+". Please confirm.")}`;

      const upi = `upi://pay?pa=${encodeURIComponent(UPI_ID)}&pn=${encodeURIComponent('1 LION ESPORTS')}&am=${encodeURIComponent(AMOUNT)}&cu=INR`;
      setTimeout(() => window.location.href = upi, 800);

      setTimeout(() => status.textContent = 'UPI app should open. After paying, send screenshot.', 1500);
    } catch(e) {
      status.textContent = 'Error saving. Contact admin on WhatsApp.';
      waLink.style.display = 'inline-block';
      waLink.href = `https://wa.me/${ADMIN_WA}`;
      console.error(e);
      alert('Error: ' + e.message);
    }
  });
</script>

</body>
</html>
